
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;

    /* Rotated hex cell sizing (for merged blocks) */
    --hex-rot-w: 70px; /* matches .hex-honeycomb-cell-rotated width (base) */
    --hex-rot-h: 60px; /* matches .hex-honeycomb-cell-rotated height (base) */
    --hex-rot-m: 1px;  /* matches .hex-honeycomb-cell-rotated margin (base) */

    /* Legacy hex grid sizing (pointy-top) */
    --hex-w: 50px;
    --hex-h: 50px;
    --hex-m: 1px; /* requested 1px gap around each cell */

    /* Grid Theme Colors */
    --grid-primary: 180 100% 56%;
    --grid-primary-hover: 180 100% 60%;
    --grid-primary-active: 180 100% 50%;
    --grid-border: 180 50% 30%;
    --grid-shadow: 180 30% 40%;
    
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .grid-cell {
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border-2 border-[hsl(var(--grid-border))]
           transition-all duration-200 ease-in-out
           cursor-pointer select-none
           relative overflow-hidden;
  }

  .grid-cell::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent opacity-0 transition-opacity duration-200;
  }
  
  /* Honeycomb Hexagonal Grid Styles */
  .hex-honeycomb-container {
    @apply flex flex-col items-center relative;
  }

  .hex-honeycomb-row {
    @apply flex;
    margin-bottom: -25px; /* Vertical gap between rows */
  }

  .hex-honeycomb-cell {
    width: 50px;
    height: 50px;
    margin: 1px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    
    /* Create hexagon shape using clip-path */
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border-2 border-[hsl(var(--grid-border))]
           overflow-hidden;
  }

  /* Merged block that spans N rotated hex cells */
  .hex-merged-block {
    height: var(--hex-rot-h);
    /* total width = N * (cell width + left+right margins) */
    width: calc(var(--merge-cells, 1) * (var(--hex-rot-w) + (2 * var(--hex-rot-m))));
    margin: var(--hex-rot-m);
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border-2 border-[hsl(var(--grid-border))]
           overflow-hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px; /* slight rounding for merged rectangle */
  }

  /* Rotated hexagon cells (flat top/bottom) */
  .hex-honeycomb-cell-rotated {
    width: 70px;
    height: 60px;
    margin: 1px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    
    /* Create rotated hexagon shape (flat top/bottom) using clip-path */
    clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);
    
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border-2 border-[hsl(var(--grid-border))]
           overflow-hidden;
  }

  .hex-honeycomb-cell:hover, .hex-honeycomb-cell-rotated:hover {
    @apply scale-110 brightness-110 z-10;
  }

  .hex-honeycomb-cell:active, .hex-honeycomb-cell-rotated:active {
    @apply scale-95;
  }

  .hex-cell-content {
    @apply absolute inset-0 flex items-center justify-center;
  }
  
  /* Responsive honeycomb sizing */
  @media (min-width: 640px) {
    :root {
      --hex-rot-w: 80px;
      --hex-rot-h: 70px;
      --hex-rot-m: 1px;
    }
    .hex-honeycomb-cell {
      width: 60px;
      height: 60px;
      margin: 1px;
    }

    .hex-honeycomb-cell-rotated {
      width: 80px;
      height: 70px;
      margin: 1px;
    }
    
    .hex-honeycomb-row {
      margin-bottom: -30px; /* Slightly larger gap on small screens */
    }
  }

  @media (min-width: 768px) {
    :root {
      --hex-rot-w: 90px;
      --hex-rot-h: 80px;
      --hex-rot-m: 2px;
    }
    .hex-honeycomb-cell {
      width: 70px;
      height: 70px;
      margin: 2px;
    }

    .hex-honeycomb-cell-rotated {
      width: 90px;
      height: 80px;
      margin: 2px;
    }
    
    .hex-honeycomb-row {
      margin-bottom: -35px;
    }
  }

  @media (min-width: 1024px) {
    :root {
      --hex-rot-w: 100px;
      --hex-rot-h: 90px;
      --hex-rot-m: 2px;
    }
    .hex-honeycomb-cell {
      width: 80px;
      height: 80px;
      margin: 2px;
    }

    .hex-honeycomb-cell-rotated {
      width: 100px;
      height: 90px;
      margin: 2px;
    }
    
    .hex-honeycomb-row {
      margin-bottom: 16px;
    }
  }

  /* Legacy hex grid styles for existing components */
  .hex-grid-container {
    @apply flex flex-col items-center relative;
  }
  
  .hex-row {
    @apply flex;
  }

  /* Legacy merged block that spans N contiguous hex cells horizontally */
  .hex-merged-block-legacy {
    height: var(--hex-h);
    /* total width = N * (cell width + left+right margins) */
    width: calc(var(--merge-cells, 1) * (var(--hex-w) + (2 * var(--hex-m))));
    margin: var(--hex-m);
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border border-[hsl(var(--grid-border))]
           overflow-hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px; /* slight rounding for merged rectangle */
  }

  /* Alternate rows offset by half hex width */
  .hex-row.offset {
    margin-left: calc(var(--hex-w) /28);
  }

  /* Remove vertical gap between rows by overlapping 1/4 of hex height */
  .hex-row + .hex-row {
    /* overlap intrinsic vertical spacing plus the 1px margin */
    margin-top: calc(-1 * ((var(--hex-h) / 4) + var(--hex-m)));
  }

  .hex-cell {
    width: var(--hex-w);
    height: var(--hex-h);
    margin: var(--hex-m);
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    
    /* Create pointy-top hexagon shape using clip-path */
    clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);
    
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border border-[hsl(var(--grid-border))]
           overflow-hidden;
  }

  /* Force solid green when active, overriding gradient */
  .hex-cell.hex-cell--active {
    background-image: none !important;
    background-color: #22c55e !important; /* emerald-500 */
    border-color: #16a34a !important;     /* green-600 */
    z-index: 10;
  }

  /* Large center hexagonal cell */
  .center-hex-cell {
    width: 120px;
    height: 120px;
    margin: -1px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    
    /* Create large pointy-top hexagon shape using clip-path */
    clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);
    
    @apply bg-gradient-to-br from-[hsl(var(--grid-primary))] to-[hsl(var(--grid-primary-active))]
           border-2 border-[hsl(var(--grid-border))]
           overflow-hidden;
  }

  .hex-cell:hover, .center-hex-cell:hover {
    @apply scale-110 brightness-110 z-10;
  }

  .hex-cell:active, .center-hex-cell:active {
    @apply scale-95;
  }

  .hex-content {
    @apply absolute inset-0 flex items-center justify-center;
  }

  /* Responsive hexagon sizing */
  @media (min-width: 640px) {
    .hex-cell {
      width: 60px;
      height: 60px;
      margin: 1px;
    }
    
    .center-hex-cell {
      width: 140px;
      height: 140px;
      margin: 1px;
    }
    :root { --hex-w: 60px; --hex-h: 60px; --hex-m: 1px; }
  }

  @media (min-width: 768px) {
    .hex-cell {
      width: 70px;
      height: 70px;
      margin: 1px;
    }
    
    .center-hex-cell {
      width: 160px;
      height: 160px;
      margin: 1px;
    }
    :root { --hex-w: 70px; --hex-h: 70px; --hex-m: 1px; }
  }

  @media (min-width: 1024px) {
    .hex-cell {
      width: 80px;
      height: 80px;
      margin: 1px;
    }
    
    .center-hex-cell {
      width: 180px;
      height: 180px;
      margin: 1px;
    }
    :root { --hex-w: 80px; --hex-h: 80px; --hex-m: 1px; }
  }
}
